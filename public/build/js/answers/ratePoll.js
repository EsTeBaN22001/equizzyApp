let starId=null;window.addEventListener("DOMContentLoaded",async()=>{const e=new FormData;e.append("pollUniqId",urlPoll);if((await callFetch(domain+"/polls/verify-rate","POST",e)).isRated){document.querySelector(".rate-poll-container").innerHTML='<p class="rated-message">Ya calificó esta encuesta</p>'}else{document.querySelector(".stars-widget").addEventListener("click",e=>{document.querySelectorAll(".fa-star").forEach(e=>{e.classList.remove("rated")});const a=getParentElementByClass(e.target,"fa-star");starId=a.dataset.rateid;for(let e=1;e<=starId;e++){document.querySelector(`[data-rateid="${e}"]`).classList.add("rated")}})}});const rateButton=document.querySelector(".rate-button");rateButton.addEventListener("click",async()=>{if(starId){const e=new FormData;e.append("rate",starId),e.append("pollUniqId",urlPoll);const a=await callFetch(domain+"/polls/rate","POST",e);await a.result?Swal.fire("Se envió correctamente!","Gracias por su calificación!","success").then(()=>{document.querySelector(".rate-poll-container").innerHTML='<p class="rated-message">Gracias por su calificación</p>'}):Swal.fire("Error!","Hubo un error al enviar la calificación!","error")}else Swal.fire("Error!","Debes seleccionar una calificación para enviarla!","error")});